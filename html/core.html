<!DOCTYPE html>
<html>
  <head>
    <title>generic</title>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="viewport" content="width=device-width, initial-scale=2.0, user-scalable=yes, minimum-scale=2.0, maximum-scale=2.0" />
    <script src="/js/libs/jquery-1.9.1.min.js" type="text/javascript"></script>
  </head>
  <body style="margin:0;padding:0;">
    <canvas id="theCanvas" style="border:0; padding:0; margin:0;"></canvas>  
    <img src="../models/textures/test.bmp" id="itest" style="display:none;" />
    <script type="text/javascript">
      // TODO: verify browser support
      GENERAL = 3;
      //
      // TODO: verify if still needed
      function require(s) {
        ;
      }
      //
      function getBrowserType() {
        var ua = navigator.userAgent.toLowerCase();
        var isFirefox = ua.indexOf("firefox") > -1;
        var isSafari = ua.indexOf("safari") > -1;
        if (isFirefox || isSafari) {
          return GENERAL;
        }
      } //getBrowserType
      //
      function pause(millis) {
        var date = new Date();
        var curDate = null;
        do { curDate = new Date(); }
        while(curDate-date < millis);
      } // pause
      //
      // FILES TO LOAD
      // TODO: verify if jQuery needs to be loaded twice
      var scripts = [
      '/js/libs/jquery-1.9.1.min.js',
      '/js/libs/sylvester.src.js',
      '/js/libs/pathfinding-browser.min.js',
      '/js/utils/base64.js',
      '/js/utils/qsort.js',
      '/js/elements/vector.js',
      '/js/configuration.js',
      '/js/utils/initializerCanvas.js',
      '/js/utils/profiler.js',
      '/js/utils/tools.js',
      '/js/env/camera.js',
      '/js/env/3d.js',
      '/js/env/lightSource.js',
      '/js/elements/face.js',
      '/js/elements/texture.js',
      '/js/env/model.js',
      '/js/env/occlusionCulling.js',
      '/js/env/map.js',
      '/js/env/mapSector.js',
      '/js/elements/sprite.js',
      '/js/env/collisionDetector.js',
      '/js/core.js'
      ];
      // FILE LOADING
      body = document.getElementsByTagName("body")[0];
      for (var index=0; index<=scripts.length-1; index++) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = '..' + scripts[index] + "?v=" + Math.random();
        body.appendChild(script);
        // LET BROWSER TO LOAD SCRIPT INTO RUNTIME
        // WAIT A WHILE
        pause(100);
      } // for
    </script>
  </body>
</html>
